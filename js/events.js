let events = {"2018-02-20": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 136"}], "2018-02-21": [{"time": "12:00PM - 3:40PM", "location": "MBCC 136"}], "2018-02-22": [{"time": "2:50PM - 5:50PM", "location": "MBCC 137"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 125"}], "2018-02-26": [{"time": "1:40PM - 3:40PM", "location": "MBCC 125"}], "2018-02-27": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 136"}], "2018-02-28": [{"time": "12:00PM - 3:40PM", "location": "MBCC 136"}], "2018-03-01": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "2:50PM - 5:50PM", "location": "MBCC 137"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 125"}], "2018-03-05": [{"time": "1:40PM - 3:40PM", "location": "MBCC 125"}], "2018-03-06": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 136"}], "2018-03-07": [{"time": "12:00PM - 3:40PM", "location": "MBCC 136"}], "2018-03-08": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "2:50PM - 5:50PM", "location": "MBCC 137"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 125"}], "2018-03-12": [{"time": "1:40PM - 3:40PM", "location": "MBCC 125"}], "2018-03-13": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 136"}], "2018-03-14": [{"time": "12:00PM - 3:40PM", "location": "MBCC 136"}], "2018-03-15": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "2:50PM - 5:50PM", "location": "MBCC 137"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 125"}], "2018-03-19": [{"time": "1:40PM - 3:40PM", "location": "MBCC 125"}], "2018-03-20": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 136"}], "2018-03-21": [{"time": "12:00PM - 3:40PM", "location": "MBCC 136"}], "2018-03-22": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "2:50PM - 5:50PM", "location": "MBCC 137"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 125"}], "2018-03-26": [{"time": "1:40PM - 3:40PM", "location": "MBCC 125"}], "2018-03-27": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 136"}], "2018-03-28": [{"time": "12:00PM - 3:40PM", "location": "MBCC 136"}], "2018-03-29": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 125"}], "2018-04-02": [{"time": "1:40PM - 3:40PM", "location": "MBCC 125"}], "2018-04-03": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "2:00PM - 5:00PM", "location": "MBCC 138"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 136"}], "2018-04-04": [{"time": "12:00PM - 3:40PM", "location": "MBCC 136"}], "2018-04-05": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 125"}], "2018-04-09": [{"time": "1:40PM - 3:40PM", "location": "MBCC 125"}], "2018-04-10": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "2:00PM - 5:00PM", "location": "MBCC 138"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 136"}], "2018-04-11": [{"time": "12:00PM - 3:40PM", "location": "MBCC 136"}], "2018-04-12": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 125"}], "2018-04-16": [{"time": "1:40PM - 3:40PM", "location": "MBCC 125"}], "2018-04-17": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "2:00PM - 5:00PM", "location": "MBCC 138"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 136"}], "2018-04-18": [{"time": "12:00PM - 3:40PM", "location": "MBCC 136"}], "2018-04-19": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 125"}], "2018-04-23": [{"time": "1:40PM - 3:40PM", "location": "MBCC 125"}], "2018-04-24": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "2:00PM - 5:00PM", "location": "MBCC 138"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 136"}], "2018-04-25": [{"time": "12:00PM - 3:40PM", "location": "MBCC 136"}], "2018-04-26": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 125"}], "2018-04-30": [{"time": "1:40PM - 3:40PM", "location": "MBCC 125"}], "2018-05-01": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "2:00PM - 5:00PM", "location": "MBCC 138"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 136"}], "2018-05-02": [{"time": "12:00PM - 3:40PM", "location": "MBCC 136"}], "2018-05-03": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 125"}], "2018-05-07": [{"time": "1:40PM - 3:40PM", "location": "MBCC 125"}], "2018-05-08": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "2:00PM - 5:00PM", "location": "MBCC 138"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 136"}], "2018-05-09": [{"time": "12:00PM - 3:40PM", "location": "MBCC 136"}], "2018-05-10": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 125"}], "2018-05-14": [{"time": "1:40PM - 3:40PM", "location": "MBCC 125"}], "2018-05-15": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "2:00PM - 5:00PM", "location": "MBCC 138"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 136"}], "2018-05-16": [{"time": "12:00PM - 3:40PM", "location": "MBCC 136"}], "2018-05-17": [{"time": "12:50PM - 2:50PM", "location": "MBCC 134"}, {"time": "5:50PM - 7:50PM", "location": "MBCC 125"}]};

const minDate = new Date('February 25, 2018 23:59:00');
let current = new Date();
function showBackScheduleButton()
{
    document.getElementById("back-schedule").disable = (current > minDate?false:true);
}
function getMondayOfCurrentWeek()
{
  day = current.getDay()
  return new Date(current.getFullYear(), current.getMonth(),
                  current.getDate() + (day == 0?-6:1)-day );
}

function yymmdd(d){
  return d.toISOString().substring(0,10);
}

function getWeekSchedule()
{
  let calculatedDay = getMondayOfCurrentWeek();
  let week = { 'mon': '', 'tue': '', 'wed':'', 'thu': ''};
  let meetingsHTML = {};
  let date = '';
  for (var day in week)
  {
    meetingsHTML[day] = ''
    week[day]= yymmdd(calculatedDay);
    date += '<td>' + week[day].substring(5).replace('-',' / ') + "</td>";
    var meetings = events[week[day]];
    if(meetings != [])
    {
      for (var meeting in meetings)
      {
        meetingsHTML[day] += '<li><span class=time>'
                              + meetings[meeting].time + "</span></li>";

        meetingsHTML[day] += '<li class=location>'
                              + meetings[meeting].location + "</li>";
      }
      document.getElementById(day).innerHTML= meetingsHTML[day];
    }
    else
    {
      document.getElementById(day).innerHTML='';
    }
    calculatedDay.setDate(calculatedDay.getDate() + 1);
  }
  document.getElementById("date").innerHTML = date;
}

function getNextWeekSchedule()
{
  current.setDate(current.getDate() + 7);
  document.getElementById("back-schedule").disable = false;
  getWeekSchedule();
}

function getLastWeekSchedule()
{
  if (current < minDate)
  {
    document.getElementById("back-schedule").disable = true;
  }
  else
  {
    document.getElementById("back-schedule").disable = false;
    current.setDate(current.getDate() - 7);
    getWeekSchedule();
  }
}
